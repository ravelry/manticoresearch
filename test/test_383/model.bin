a:1:{i:0;a:62:{i:0;a:2:{s:8:"sphinxql";s:86:"create table rt1 (title text indexed, mva1 multi, gid int, j1 json) rt_mem_limit='12M'";s:14:"total_affected";i:0;}i:1;a:2:{s:8:"sphinxql";s:86:"create table rt2 (title text indexed, mva1 multi, gid int, j1 json) rt_mem_limit='12M'";s:14:"total_affected";i:0;}i:2;a:2:{s:8:"sphinxql";s:97:"create table rtc (title text indexed, mva1 multi, gid int, j1 json) rt_mem_limit='12M' dict='crc'";s:14:"total_affected";i:0;}i:3;a:2:{s:8:"sphinxql";s:189:"insert into rt1 (id,title,mva1,gid,j1) values (1, 'test 1', (11,12,13), 11, '{"data":"test 1", fd:11}'), (2, 'test 2', (21,22,23), 21, ''), (3, 'test 3', (), 31, '{"data":"test 3", fd:31}')";s:14:"total_affected";i:3;}i:4;a:3:{s:8:"sphinxql";s:22:"SELECT * FROM test:rt1";s:10:"total_rows";i:3;s:4:"rows";a:3:{i:0;a:4:{s:2:"id";s:1:"1";s:3:"gid";s:2:"11";s:2:"j1";s:25:"{"data":"test 1","fd":11}";s:4:"mva1";s:8:"11,12,13";}i:1;a:4:{s:2:"id";s:1:"2";s:3:"gid";s:2:"21";s:2:"j1";N;s:4:"mva1";s:8:"21,22,23";}i:2;a:4:{s:2:"id";s:1:"3";s:3:"gid";s:2:"31";s:2:"j1";s:25:"{"data":"test 3","fd":31}";s:4:"mva1";s:0:"";}}}i:5;a:2:{s:8:"sphinxql";s:190:"replace into rt1 (id,title,mva1,gid,j1) values (5, 'test 5', (51,52,53), 51, '{"data":"test 5", fd:51}'), (1, 'test 6', (61,62,63), 61, '{"data":"test 6", fd:16}'), (7, 'test 7', (), 71, '')";s:14:"total_affected";i:3;}i:6;a:3:{s:8:"sphinxql";s:22:"SELECT * FROM test:rt1";s:10:"total_rows";i:5;s:4:"rows";a:5:{i:0;a:4:{s:2:"id";s:1:"5";s:3:"gid";s:2:"51";s:2:"j1";s:25:"{"data":"test 5","fd":51}";s:4:"mva1";s:8:"51,52,53";}i:1;a:4:{s:2:"id";s:1:"1";s:3:"gid";s:2:"61";s:2:"j1";s:25:"{"data":"test 6","fd":16}";s:4:"mva1";s:8:"61,62,63";}i:2;a:4:{s:2:"id";s:1:"2";s:3:"gid";s:2:"21";s:2:"j1";N;s:4:"mva1";s:8:"21,22,23";}i:3;a:4:{s:2:"id";s:1:"3";s:3:"gid";s:2:"31";s:2:"j1";s:25:"{"data":"test 3","fd":31}";s:4:"mva1";s:0:"";}i:4;a:4:{s:2:"id";s:1:"7";s:3:"gid";s:2:"71";s:2:"j1";N;s:4:"mva1";s:0:"";}}}i:7;a:2:{s:8:"sphinxql";s:19:"create cluster test";s:14:"total_affected";i:0;}i:8;a:2:{s:8:"sphinxql";s:26:"ALTER CLUSTER test ADD rt1";s:14:"total_affected";i:0;}i:9;a:2:{s:8:"sphinxql";s:26:"ALTER CLUSTER test ADD rt2";s:14:"total_affected";i:0;}i:10;a:3:{s:8:"sphinxql";s:46:"show status like 'cluster_test_last_committed'";s:10:"total_rows";i:1;s:4:"rows";a:1:{i:0;a:2:{s:7:"Counter";s:27:"cluster_test_last_committed";s:5:"Value";s:1:"2";}}}i:11;a:3:{s:5:"agent";s:1:"1";s:8:"sphinxql";s:37:"join cluster test at '%addr_connect%'";s:14:"total_affected";i:0;}i:12;a:4:{s:5:"agent";s:1:"1";s:8:"sphinxql";s:46:"show status like 'cluster_test_last_committed'";s:10:"total_rows";i:1;s:4:"rows";a:1:{i:0;a:2:{s:7:"Counter";s:27:"cluster_test_last_committed";s:5:"Value";s:1:"2";}}}i:13;a:3:{s:5:"agent";s:1:"2";s:8:"sphinxql";s:37:"join cluster test at '%addr_connect%'";s:14:"total_affected";i:0;}i:14;a:4:{s:5:"agent";s:1:"2";s:8:"sphinxql";s:46:"show status like 'cluster_test_last_committed'";s:10:"total_rows";i:1;s:4:"rows";a:1:{i:0;a:2:{s:7:"Counter";s:27:"cluster_test_last_committed";s:5:"Value";s:1:"2";}}}i:15;a:4:{s:5:"agent";s:1:"2";s:8:"sphinxql";s:22:"SELECT * FROM test:rt1";s:10:"total_rows";i:5;s:4:"rows";a:5:{i:0;a:4:{s:2:"id";s:1:"5";s:3:"gid";s:2:"51";s:2:"j1";s:25:"{"data":"test 5","fd":51}";s:4:"mva1";s:8:"51,52,53";}i:1;a:4:{s:2:"id";s:1:"1";s:3:"gid";s:2:"61";s:2:"j1";s:25:"{"data":"test 6","fd":16}";s:4:"mva1";s:8:"61,62,63";}i:2;a:4:{s:2:"id";s:1:"2";s:3:"gid";s:2:"21";s:2:"j1";N;s:4:"mva1";s:8:"21,22,23";}i:3;a:4:{s:2:"id";s:1:"3";s:3:"gid";s:2:"31";s:2:"j1";s:25:"{"data":"test 3","fd":31}";s:4:"mva1";s:0:"";}i:4;a:4:{s:2:"id";s:1:"7";s:3:"gid";s:2:"71";s:2:"j1";N;s:4:"mva1";s:0:"";}}}i:16;a:3:{s:5:"agent";s:1:"2";s:8:"sphinxql";s:22:"SELECT * FROM test:rt2";s:10:"total_rows";i:0;}i:17;a:3:{s:5:"agent";s:1:"2";s:8:"sphinxql";s:43:"UPDATE test:rt1 SET mva1=(31,33) where id=3";s:14:"total_affected";i:1;}i:18;a:4:{s:5:"agent";s:1:"2";s:8:"sphinxql";s:46:"show status like 'cluster_test_last_committed'";s:10:"total_rows";i:1;s:4:"rows";a:1:{i:0;a:2:{s:7:"Counter";s:27:"cluster_test_last_committed";s:5:"Value";s:1:"3";}}}i:19;a:3:{s:5:"agent";s:1:"2";s:8:"sphinxql";s:31:"DELETE FROM test:rt1 WHERE id=7";s:14:"total_affected";i:1;}i:20;a:4:{s:5:"agent";s:1:"2";s:8:"sphinxql";s:46:"show status like 'cluster_test_last_committed'";s:10:"total_rows";i:1;s:4:"rows";a:1:{i:0;a:2:{s:7:"Counter";s:27:"cluster_test_last_committed";s:5:"Value";s:1:"4";}}}i:21;a:4:{s:5:"agent";s:1:"2";s:8:"sphinxql";s:22:"SELECT * FROM test:rt1";s:10:"total_rows";i:4;s:4:"rows";a:4:{i:0;a:4:{s:2:"id";s:1:"5";s:3:"gid";s:2:"51";s:2:"j1";s:25:"{"data":"test 5","fd":51}";s:4:"mva1";s:8:"51,52,53";}i:1;a:4:{s:2:"id";s:1:"2";s:3:"gid";s:2:"21";s:2:"j1";N;s:4:"mva1";s:8:"21,22,23";}i:2;a:4:{s:2:"id";s:1:"1";s:3:"gid";s:2:"61";s:2:"j1";s:25:"{"data":"test 6","fd":16}";s:4:"mva1";s:8:"61,62,63";}i:3;a:4:{s:2:"id";s:1:"3";s:3:"gid";s:2:"31";s:2:"j1";s:25:"{"data":"test 3","fd":31}";s:4:"mva1";s:5:"31,33";}}}i:22;a:2:{s:5:"agent";s:1:"1";s:8:"sphinxql";s:59:"/* wait-status => cluster_test_last_committed | 4
1 rows */";}i:23;a:4:{s:5:"agent";s:1:"1";s:8:"sphinxql";s:34:"insert into rt2 (id) values (1001)";s:5:"errno";i:1064;s:5:"error";s:55:"index 'rt2' is a part of cluster 'test', use 'test:rt2'";}i:24;a:4:{s:5:"agent";s:1:"1";s:8:"sphinxql";s:36:"UPDATE rt2 SET mva1=() where id=1001";s:5:"errno";i:1064;s:5:"error";s:66:"index rt2: index 'rt2' is a part of cluster 'test', use 'test:rt2'";}i:25;a:4:{s:5:"agent";s:1:"1";s:8:"sphinxql";s:29:"DELETE FROM rt2 WHERE id=1001";s:5:"errno";i:1064;s:5:"error";s:66:"index rt2: index 'rt2' is a part of cluster 'test', use 'test:rt2'";}i:26;a:4:{s:5:"agent";s:1:"1";s:8:"sphinxql";s:46:"show status like 'cluster_test_last_committed'";s:10:"total_rows";i:1;s:4:"rows";a:1:{i:0;a:2:{s:7:"Counter";s:27:"cluster_test_last_committed";s:5:"Value";s:1:"4";}}}i:27;a:3:{s:5:"agent";s:1:"1";s:8:"sphinxql";s:202:"insert into test:rt2 (id,title,mva1,gid,j1) values (11, 'test 11', (11,12,13), 11, '{"data":"test 11", fd:11}'), (12, 'test 12', (21,22,23), 21, ''), (13, 'test 13', (), 31, '{"data":"test 13", fd:31}')";s:14:"total_affected";i:3;}i:28;a:4:{s:5:"agent";s:1:"1";s:8:"sphinxql";s:46:"show status like 'cluster_test_last_committed'";s:10:"total_rows";i:1;s:4:"rows";a:1:{i:0;a:2:{s:7:"Counter";s:27:"cluster_test_last_committed";s:5:"Value";s:1:"5";}}}i:29;a:1:{s:8:"sphinxql";s:59:"/* wait-status => cluster_test_last_committed | 5
1 rows */";}i:30;a:3:{s:8:"sphinxql";s:46:"show status like 'cluster_test_last_committed'";s:10:"total_rows";i:1;s:4:"rows";a:1:{i:0;a:2:{s:7:"Counter";s:27:"cluster_test_last_committed";s:5:"Value";s:1:"5";}}}i:31;a:3:{s:8:"sphinxql";s:22:"SELECT * FROM test:rt2";s:10:"total_rows";i:3;s:4:"rows";a:3:{i:0;a:4:{s:2:"id";s:2:"11";s:3:"gid";s:2:"11";s:2:"j1";s:26:"{"data":"test 11","fd":11}";s:4:"mva1";s:8:"11,12,13";}i:1;a:4:{s:2:"id";s:2:"12";s:3:"gid";s:2:"21";s:2:"j1";N;s:4:"mva1";s:8:"21,22,23";}i:2;a:4:{s:2:"id";s:2:"13";s:3:"gid";s:2:"31";s:2:"j1";s:26:"{"data":"test 13","fd":31}";s:4:"mva1";s:0:"";}}}i:32;a:2:{s:8:"sphinxql";s:56:"UPDATE test:rt2 SET mva1=(101) where j1.data is not null";s:14:"total_affected";i:2;}i:33;a:3:{s:8:"sphinxql";s:22:"SELECT * FROM test:rt2";s:10:"total_rows";i:3;s:4:"rows";a:3:{i:0;a:4:{s:2:"id";s:2:"11";s:3:"gid";s:2:"11";s:2:"j1";s:26:"{"data":"test 11","fd":11}";s:4:"mva1";s:3:"101";}i:1;a:4:{s:2:"id";s:2:"12";s:3:"gid";s:2:"21";s:2:"j1";N;s:4:"mva1";s:8:"21,22,23";}i:2;a:4:{s:2:"id";s:2:"13";s:3:"gid";s:2:"31";s:2:"j1";s:26:"{"data":"test 13","fd":31}";s:4:"mva1";s:3:"101";}}}i:34;a:1:{s:8:"sphinxql";s:42:"/* stop-agent => stop=ok, return code=0 */";}i:35;a:2:{s:5:"agent";s:1:"1";s:8:"sphinxql";s:59:"/* wait-status => cluster_test_last_committed | 6
1 rows */";}i:36;a:3:{s:5:"agent";s:1:"1";s:8:"sphinxql";s:42:"DELETE FROM test:rt2 WHERE j.fd IN (10,11)";s:14:"total_affected";i:0;}i:37;a:3:{s:5:"agent";s:1:"1";s:8:"sphinxql";s:111:"insert into test:rt2 (id,title,mva1,gid,j1) values (21, 'test 21', (21,22,23), 21, '{"data":"test 21", fd:21}')";s:14:"total_affected";i:1;}i:38;a:4:{s:5:"agent";s:1:"1";s:8:"sphinxql";s:22:"SELECT * FROM test:rt2";s:10:"total_rows";i:4;s:4:"rows";a:4:{i:0;a:4:{s:2:"id";s:2:"11";s:3:"gid";s:2:"11";s:2:"j1";s:26:"{"data":"test 11","fd":11}";s:4:"mva1";s:3:"101";}i:1;a:4:{s:2:"id";s:2:"21";s:3:"gid";s:2:"21";s:2:"j1";s:26:"{"data":"test 21","fd":21}";s:4:"mva1";s:8:"21,22,23";}i:2;a:4:{s:2:"id";s:2:"12";s:3:"gid";s:2:"21";s:2:"j1";N;s:4:"mva1";s:8:"21,22,23";}i:3;a:4:{s:2:"id";s:2:"13";s:3:"gid";s:2:"31";s:2:"j1";s:26:"{"data":"test 13","fd":31}";s:4:"mva1";s:3:"101";}}}i:39;a:3:{s:5:"agent";s:1:"1";s:8:"sphinxql";s:72:"UPDATE test:rt2 SET gid=1 WHERE MATCH ('test | 21') AND j1.fd IN (12,21)";s:14:"total_affected";i:1;}i:40;a:4:{s:5:"agent";s:1:"1";s:8:"sphinxql";s:22:"SELECT * FROM test:rt2";s:10:"total_rows";i:4;s:4:"rows";a:4:{i:0;a:4:{s:2:"id";s:2:"11";s:3:"gid";s:2:"11";s:2:"j1";s:26:"{"data":"test 11","fd":11}";s:4:"mva1";s:3:"101";}i:1;a:4:{s:2:"id";s:2:"21";s:3:"gid";s:1:"1";s:2:"j1";s:26:"{"data":"test 21","fd":21}";s:4:"mva1";s:8:"21,22,23";}i:2;a:4:{s:2:"id";s:2:"12";s:3:"gid";s:2:"21";s:2:"j1";N;s:4:"mva1";s:8:"21,22,23";}i:3;a:4:{s:2:"id";s:2:"13";s:3:"gid";s:2:"31";s:2:"j1";s:26:"{"data":"test 13","fd":31}";s:4:"mva1";s:3:"101";}}}i:41;a:1:{s:8:"sphinxql";s:46:"/* start-agent => ; start=ok, return code=0 */";}i:42;a:1:{s:8:"sphinxql";s:59:"/* wait-ready => cluster_test_node_state | synced
1 rows */";}i:43;a:3:{s:8:"sphinxql";s:22:"SELECT * FROM test:rt2";s:10:"total_rows";i:4;s:4:"rows";a:4:{i:0;a:4:{s:2:"id";s:2:"11";s:3:"gid";s:2:"11";s:2:"j1";s:26:"{"data":"test 11","fd":11}";s:4:"mva1";s:3:"101";}i:1;a:4:{s:2:"id";s:2:"21";s:3:"gid";s:1:"1";s:2:"j1";s:26:"{"data":"test 21","fd":21}";s:4:"mva1";s:8:"21,22,23";}i:2;a:4:{s:2:"id";s:2:"12";s:3:"gid";s:2:"21";s:2:"j1";N;s:4:"mva1";s:8:"21,22,23";}i:3;a:4:{s:2:"id";s:2:"13";s:3:"gid";s:2:"31";s:2:"j1";s:26:"{"data":"test 13","fd":31}";s:4:"mva1";s:3:"101";}}}i:44;a:2:{s:8:"sphinxql";s:26:"ALTER CLUSTER test ADD rtc";s:14:"total_affected";i:0;}i:45;a:2:{s:8:"sphinxql";s:119:"insert into test:rtc (id,title,mva1,gid,j1) values (101, 'test 101', (121,122,123), 121, '{"data":"test 101", fd:121}')";s:14:"total_affected";i:1;}i:46;a:2:{s:8:"sphinxql";s:119:"insert into test:rt2 (id,title,mva1,gid,j1) values (201, 'test 201', (221,222,223), 221, '{"data":"test 201", fd:221}')";s:14:"total_affected";i:1;}i:47;a:2:{s:8:"sphinxql";s:119:"insert into test:rtc (id,title,mva1,gid,j1) values (301, 'test 301', (321,322,323), 321, '{"data":"test 301", fd:321}')";s:14:"total_affected";i:1;}i:48;a:2:{s:8:"sphinxql";s:111:"insert into test:rtc (title,mva1,gid,j1) values ('test 501', (521,522,523), 521, '{"data":"test 501", fd:521}')";s:14:"total_affected";i:1;}i:49;a:2:{s:5:"agent";s:1:"2";s:8:"sphinxql";s:60:"/* wait-status => cluster_test_last_committed | 14
1 rows */";}i:50;a:4:{s:5:"agent";s:1:"2";s:8:"sphinxql";s:22:"SELECT * FROM test:rt2";s:10:"total_rows";i:5;s:4:"rows";a:5:{i:0;a:4:{s:2:"id";s:2:"11";s:3:"gid";s:2:"11";s:2:"j1";s:26:"{"data":"test 11","fd":11}";s:4:"mva1";s:3:"101";}i:1;a:4:{s:2:"id";s:2:"21";s:3:"gid";s:1:"1";s:2:"j1";s:26:"{"data":"test 21","fd":21}";s:4:"mva1";s:8:"21,22,23";}i:2;a:4:{s:2:"id";s:3:"201";s:3:"gid";s:3:"221";s:2:"j1";s:28:"{"data":"test 201","fd":221}";s:4:"mva1";s:11:"221,222,223";}i:3;a:4:{s:2:"id";s:2:"12";s:3:"gid";s:2:"21";s:2:"j1";N;s:4:"mva1";s:8:"21,22,23";}i:4;a:4:{s:2:"id";s:2:"13";s:3:"gid";s:2:"31";s:2:"j1";s:26:"{"data":"test 13","fd":31}";s:4:"mva1";s:3:"101";}}}i:51;a:4:{s:5:"agent";s:1:"2";s:8:"sphinxql";s:22:"SELECT * FROM test:rtc";s:10:"total_rows";i:3;s:4:"rows";a:3:{i:0;a:4:{s:2:"id";s:3:"101";s:3:"gid";s:3:"121";s:2:"j1";s:28:"{"data":"test 101","fd":121}";s:4:"mva1";s:11:"121,122,123";}i:1;a:4:{s:2:"id";s:3:"301";s:3:"gid";s:3:"321";s:2:"j1";s:28:"{"data":"test 301","fd":321}";s:4:"mva1";s:11:"321,322,323";}i:2;a:4:{s:2:"id";s:13:"1677721600001";s:3:"gid";s:3:"521";s:2:"j1";s:28:"{"data":"test 501","fd":521}";s:4:"mva1";s:11:"521,522,523";}}}i:52;a:3:{s:5:"agent";s:1:"2";s:8:"sphinxql";s:111:"insert into test:rtc (title,mva1,gid,j1) values ('test 601', (621,622,623), 621, '{"data":"test 601", fd:621}')";s:14:"total_affected";i:1;}i:53;a:4:{s:5:"agent";s:1:"2";s:8:"sphinxql";s:22:"SELECT * FROM test:rtc";s:10:"total_rows";i:4;s:4:"rows";a:4:{i:0;a:4:{s:2:"id";s:3:"301";s:3:"gid";s:3:"321";s:2:"j1";s:28:"{"data":"test 301","fd":321}";s:4:"mva1";s:11:"321,322,323";}i:1;a:4:{s:2:"id";s:3:"101";s:3:"gid";s:3:"121";s:2:"j1";s:28:"{"data":"test 101","fd":121}";s:4:"mva1";s:11:"121,122,123";}i:2;a:4:{s:2:"id";s:13:"1677721600001";s:3:"gid";s:3:"521";s:2:"j1";s:28:"{"data":"test 501","fd":521}";s:4:"mva1";s:11:"521,522,523";}i:3;a:4:{s:2:"id";s:18:"144116865797455873";s:3:"gid";s:3:"621";s:2:"j1";s:28:"{"data":"test 601","fd":621}";s:4:"mva1";s:11:"621,622,623";}}}i:54;a:2:{s:5:"agent";s:1:"1";s:8:"sphinxql";s:60:"/* wait-status => cluster_test_last_committed | 15
1 rows */";}i:55;a:4:{s:5:"agent";s:1:"1";s:8:"sphinxql";s:22:"SELECT * FROM test:rtc";s:10:"total_rows";i:4;s:4:"rows";a:4:{i:0;a:4:{s:2:"id";s:3:"301";s:3:"gid";s:3:"321";s:2:"j1";s:28:"{"data":"test 301","fd":321}";s:4:"mva1";s:11:"321,322,323";}i:1;a:4:{s:2:"id";s:3:"101";s:3:"gid";s:3:"121";s:2:"j1";s:28:"{"data":"test 101","fd":121}";s:4:"mva1";s:11:"121,122,123";}i:2;a:4:{s:2:"id";s:13:"1677721600001";s:3:"gid";s:3:"521";s:2:"j1";s:28:"{"data":"test 501","fd":521}";s:4:"mva1";s:11:"521,522,523";}i:3;a:4:{s:2:"id";s:18:"144116865797455873";s:3:"gid";s:3:"621";s:2:"j1";s:28:"{"data":"test 601","fd":621}";s:4:"mva1";s:11:"621,622,623";}}}i:56;a:2:{s:8:"sphinxql";s:27:"ALTER CLUSTER test DROP rt1";s:14:"total_affected";i:0;}i:57;a:2:{s:8:"sphinxql";s:27:"ALTER CLUSTER test DROP rt2";s:14:"total_affected";i:0;}i:58;a:2:{s:8:"sphinxql";s:27:"ALTER CLUSTER test DROP rtc";s:14:"total_affected";i:0;}i:59;a:2:{s:8:"sphinxql";s:14:"DROP TABLE rt1";s:14:"total_affected";i:0;}i:60;a:2:{s:8:"sphinxql";s:14:"DROP TABLE rt2";s:14:"total_affected";i:0;}i:61;a:2:{s:8:"sphinxql";s:14:"DROP TABLE rtc";s:14:"total_affected";i:0;}}}